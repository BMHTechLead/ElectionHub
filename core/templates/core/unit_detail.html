{% extends "core/base.html" %}
{% block title %}Unit {{ unit.election_unit_number }} | ElectionHub{% endblock %}

{% block content %}

<div class="mb-4">

  <!-- Clickable Back Title -->
  <h3 class="fw-bold mb-1">
    <a href="{% url 'subdistrict_detail' unit.subdistrict.id %}?type={{ vote_type }}"
       class="text-decoration-none text-dark">
       ← {{ vote_type }} Votes - Unit {{ unit.election_unit_number }}
    </a>
  </h3>

  <div class="text-muted small">
    {{ unit.election_unit_name }} • {{ unit.election_unit_address }}
  </div>

  <!-- Elegant Total Box -->
  <div class="mt-3 d-inline-block border border-success rounded px-3 py-2">
    <span class="text-muted small">Total:</span>
    <span class="fw-bold ms-1">
      {{ total_votes}}
    </span>
  </div>

</div>


<div class="row g-4">

  <!-- Totals by List -->
  <div class="col-lg-6">
    <div class="card shadow-sm border-0 h-100">
      <div class="card-body">

        <h5 class="fw-bold mb-4">Totals by List (Party)</h5>

        <div class="table-responsive">
          <table class="table align-middle table-borderless">

            <thead class="border-bottom">
              <tr class="text-muted small">
                <th class="fw-semibold">List</th>
                <th class="fw-semibold text-end">Total</th>
              </tr>
            </thead>

            <tbody>
              {% for r in per_list %}
              <tr class="border-bottom">
                <td class="py-3">
                  {{ r.list_number }} - {{ r.list_name }}
                </td>
                <td class="fw-bold text-end py-3">
                  {{ r.total }}
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="2" class="text-muted text-center py-4">
                  No votes for this unit.
                </td>
              </tr>
              {% endfor %}
            </tbody>

          </table>
        </div>

      </div>
    </div>
  </div>

  <!-- Top Candidates -->
  <div class="col-lg-6">
    <div class="card shadow-sm border-0 h-100">
      <div class="card-body">

        <h5 class="fw-bold mb-4">Top Candidates</h5>

        <div class="table-responsive">
          <table class="table align-middle table-borderless">

            <thead class="border-bottom">
              <tr class="text-muted small">
                <th class="fw-semibold">Candidate</th>
                <th class="fw-semibold">List</th>
                <th class="fw-semibold text-end">Total</th>
              </tr>
            </thead>

            <tbody>
              {% for c in top_candidates %}
              <tr class="border-bottom">
                <td class="py-3">
                  {{ c.candidate_number }} - {{ c.candidate_name }}
                </td>
                <td class="py-3">
                  {{ c.list_name }}
                </td>
                <td class="fw-bold text-end py-3">
                  {{ c.total }}
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="3" class="text-muted text-center py-4">
                  No votes.
                </td>
              </tr>
              {% endfor %}
            </tbody>

          </table>
        </div>

      </div>
    </div>
  </div>

</div>

{% endblock %}
